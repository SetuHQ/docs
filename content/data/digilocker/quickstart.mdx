---
sidebar_title: Integration guide
page_title: Digilocker quickstart
order: 1
visible_in_sidebar: true
---

## DigiLocker integration

Setu DigiLocker APIs can be used to fetch documents of your users instantly—with their consent.

Here’s a quick run through of the APIs—

- **Create a DigiLocker request**—Create a request to start the user journey, with which you can get user consent and then fetch the document from user’s digilocker. You get an `id` in response, which you can use to track this request throughout the journey.
- **Get DigiLocker request status**—Check status of a request that was created by passing the request `id`, at any point in the journey.
- **Get list of all docs available**—Get a global list of all documents that DigiLocker lets you fetch and the identifiers required to fetch a particular document.
- **Fetch a document**—Get the document that the user has consented to share with you, made available as a file URL to download. All docs other than Aadhaar, can be fetched with this API.
- **Fetch Aadhaar data**—Fetch Aadhaar document data in JSON format as well as an XML file. The API response is consistent with our <a href="/data/okyc/overview" target="blank">OKYC APIs</a>, which aids in replacing OKYC with DigiLocker, for carrying out Aadhaar KYC.
- **Revoke access token**—Revoke the OAuth user token, once necessary user documents are fetched.

Additionally, here are the URLs you would need for these APIs—

- Sandbox—`https://dg-sandbox.setu.co`
- Production—`https://dg.setu.co`
- Headers—Contact Setu for providing the credentials required to successfully call Setu APIs. This contains:
  - `x-client-id`
  - `x-client-secret`
  - `x-product-instance-id`

<hr class="primary" />

### Create a DigiLocker request

Call this API to create a new DigiLocker request. Pass the `redirectUrl` in the request body.

<Callout type="tip">
  A DigiLocker account is not mandatory for a user to start this flow. If the
  user does not have a DigiLocker account, DigiLocker will automatically create
  an account during the consent journey. User has to sign up by providing their
  Aadhaar number and authenticate with the OTP sent to Aadhaar registered mobile
  number.
</Callout>

<br />

<Callout type="warning">
  To sign up for DigiLocker, user should have linked their mobile number with
  Aadhaar.{" "}
</Callout>

<br />

<Row>
  <Portion desktopSpan="half">
    <img src="https://storage.googleapis.com/strapi-assets/latest/digilocker_auth_flow_c84910dbf3/digilocker_auth_flow_c84910dbf3.png" />
  </Portion>
</Row>

<hr class="tertiary" />

##### Usage of the redirect URL

You have to provide a `redirectUrl` in the request, which has to be a valid publicly hosted URL—the user gets redirected to this URL after going through DigiLocker Sign in / Sign up and consent screens.

It will also be used by Setu to send back relevant information about a request. By default Setu includes the `success` flag of the user consent and DigiLocker request `id`.

It also includes a scope parameter, which provides the information about the documents the user has consented to during their UI journey. The possible values are `ADHAR` for Aadhar, `PANCR` for PAN and `DRVLC` for Driver's License.
<br />
<table>
  <tbody>
    <tr>
      <th> Consent state </th>
      <th> Redirect URL </th>
    </tr>
    <tr>
      <td>Failed user consent </td>
      <td><code>&lt;redirectUrl&gt;?success=&#123;False&#125;&amp;id=&#123;Digilocker_request.id&#125;&amp;errCode=&#123;code&#125;&errMessage=&#123;message&#125;</code></td>    
    </tr>
    <tr>
      <td>User Consent to Aadhaar only </td>
      <td> 
        <code>&lt;redirectUrl&gt;?success=&#123;True&#125;&amp;id=Digilocker_request.id&amp;scope=ADHAR </code>
      </td>
    </tr>
    <tr>
      <td>User consent to all three docs </td>
      <td>
        <code>&lt;redirectUrl&gt;?success=&#123;True&#125;&amp;id=Digilocker_request.id&amp;scope=ADHAR%2BPANCR%2BDRVLC </code>
      </td>
    </tr>
    <tr>
      <td>User journey completed without selecting any doc </td>
      <td> 
        <code>&lt;redirectUrl&gt;?success=&#123;True&#125;&amp;id=Digilocker_request.id&amp;scope= </code>
      </td>
    </tr>
  </tbody>
</table>

<br />
<Callout type="tip">
  You can also add custom query params such as <code>session id</code> from your
  end. You would append this to the provided URL, like so—
  <code>(redirectUrl)?sessionId=XYZ</code>
</Callout>

<Row>
  <Portion desktopSpan="whole">
    <Tabs
      tabs={[
        {
          key: "1",
          label: "200",
          content: (
            <>
              <p>
                <Badge type="success">SUCCESS</Badge> Setu has processed your
                request successfully.
              </p>
              <hr className="tertiary" />
              <h5>Request</h5>
              <CodeBlockWithCopy language="json">
                {`POST /api/digilocker/ 
 
{ 
    "redirectUrl": "https://setu.co" 
} `}
              </CodeBlockWithCopy>
              <hr className="tertiary" />
              <h5>Response</h5>
              <p>You will get the following details—</p>
              <ul>
                <li>
                  Unique DigiLocker request <code>id</code> which can be used to
                  manage this request.
                </li>
                <li>
                  The status will be <code>unauthenticated</code> for requests
                  that do not have user consent yet and will change to{" "}
                  <code>authenticated</code> once the user has provided their
                  consent. You can check the status of a request at any point of
                  time, using the <strong>Get DigiLocker request status</strong>{" "}
                  API.
                </li>
                <li>
                  The <code>url</code> from the response should be used to
                  redirect your user to Sign in / Sign up and provide consent to
                  access their DigiLocker.
                </li>
                <li>
                  Validity of this request in <code>ISO 8601 format</code>{" "}
                  timestamp, after which the request is expired and deleted.
                </li>
              </ul>
              <CodeBlockWithCopy language="json">
                {`{ 
    "id": "ea31e1e6-96eb-4e56-a355-7bc51de94d24", 
    "status": "unauthenticated", //ENUM values—unauthenticated | authenticated | revoked 
    "url": "User login url", 
    "validUpto": "2021-10-05T19:06:28+05:30"  
} `}
              </CodeBlockWithCopy>
            </>
          ),
        },
        {
          key: "2",
          label: "400",
          content: (
            <>
              <>
                <Text size="small" weight="600">
                  Type 1
                </Text>
                <Card padding="nano" shape="rounded" marginBottom="micro">
                  <details>
                    <summary>
                      <Badge type="failure">BAD REQUEST</Badge> The{" "}
                      <code>redirectUrl</code> provided is not valid.
                    </summary>
                    <hr className="tertiary" />
                    <h5>Request</h5>
                    <CodeBlockWithCopy language="json">
                      {`POST /api/digilocker/ 
 
{ 
   "redirectUrl": "https://.co" 
} `}
                    </CodeBlockWithCopy>
                    <hr className="tertiary" />
                    <h5>Response</h5>
                    <CodeBlockWithCopy language="json">
                      {`{ 
    "error": { 
        "code": "invalid_redirect_url", 
        "detail": "Please enter a valid redirect URL.", 
        "traceId": "" 
    } 
}`}
                    </CodeBlockWithCopy>
                  </details>
                </Card>
              </> 
              <>
                <Text size="small" weight="600">
                  Type 2
                </Text>
                <Card padding="nano" shape="rounded" marginBottom="micro">
                  <details>
                    <summary>
                     <Badge type="failure">BAD REQUEST</Badge> invalid payload
                    </summary>
                    <hr className="tertiary" />
                    <h5>Request</h5>
                    <CodeBlockWithCopy language="json">
                      {`POST /api/digilocker/ 
 
{ 
   "redirectUrl": "https://.co" 
} `}
                    </CodeBlockWithCopy>
                    <hr className="tertiary" />
                    <h5>Response</h5>
                    <CodeBlockWithCopy language="json">
                      {`{ 
    "error": {
        "code": "invalid_payload",
        "detail": "redirect url for the user",
        "traceId": ""
    }
}`}
                    </CodeBlockWithCopy>
                  </details>
                </Card>
              </>  
            </>
          ),
        },
        {
          key: "4",
          label: "500",
          content: (
            <>
              <p>
                <Badge type="failure">INTERNAL SERVER ERROR</Badge> Upstream service failure or Error while processing request
              </p>
              <hr className="tertiary" />
              <h5>Request</h5>
              <CodeBlockWithCopy language="json">
                {`POST /api/digilocker/ 
 
{ 
   "redirectUrl": "https://setu.co" 
} `}
              </CodeBlockWithCopy>
              <hr className="tertiary" />
              <h5>Response</h5>
              <CodeBlockWithCopy language="json">
                {`{ 
    "error": {
        "code": "internal_server_error",
        "detail": "Upstream service failure", // Or, "Error while processing request"
        "traceId": ""
    }
} `}
              </CodeBlockWithCopy>
            </>
          ),
        },
      ]}
    ></Tabs>
  </Portion>
</Row>

<hr class="primary" />

### Get DigiLocker request status

Call this API to get status of a DigiLocker request.

<Row>
  <Portion desktopSpan="whole">
    <Tabs
      tabs={[
        {
          key: "1",
          label: "200",
          content: (
            <>
              <p>
                <Badge type="success">SUCCESS</Badge> Setu has processed your
                request successfully.
              </p>
              <hr className="tertiary" />
              <h5>Request</h5>
              <p>
                Pass the DigiLocker request <code>id</code> as a URL parameter
              </p>
              <CodeBlockWithCopy language="json">
                {`GET /api/digilocker/:id/status `}
              </CodeBlockWithCopy>
              <hr className="tertiary" />
              <h5>Response</h5>
              <p>You will get the following details—</p>
              <ul>
                <li>
                  <p>
                    DigiLocker request <code>id</code>
                  </p>
                </li>
                <li>
                  <p>
                    The status will be <code>unauthenticated</code> for requests
                    that do not have user consent yet and will change to{" "}
                    <code>authenticated</code> once the user has provided their
                    consent.
                  </p>
                </li>
                <li>
                  <p>
                    The <code>url</code> from the response should be used to
                    redirect your user to Sign in / Sign up and provide consent
                    to access their DigiLocker.
                  </p>
                </li>
                <li>
                  <p>
                    Validity of this request in <code>ISO 8601 format</code>{" "}
                    timestamp, after which the request is expired and deleted.
                  </p>
                </li>
                <li>
                  <p>
                    <code>digilockerUserDetails</code>, for the DigiLocker user associated with this request. 
                    If the request is not authenticated, this will be an empty dictionary. In case the
                    request is authenticated, this field will contain the following details 
                    (if available from DigiLocker):
                  </p>
                  <ul>
                    <li>
                      <code>digilockerId</code> - The DigiLocker ID of the user
                    </li>
                    <li>
                      <code>email</code> - The email of the user
                    </li>
                    <li>
                      <code>phoneNumber</code> - The phone number of the user
                    </li>
                  </ul>
                </li>
                <li>
                  <p>
                    A <code>traceId</code> for this request, which you can share 
                    with us for debugging purposes.
                  </p>
                </li>
              </ul>
              <CodeBlockWithCopy language="json">
                {`{ 
    "id": "477dc21a-fa28-4c7f-9291-f35d63d5bda7", 
    "status": "authenticated", //ENUM values—unauthenticated | authenticated | revoked 
    "url": "User login url", 
    "validUpto": "2021-10-06T08:43:18+05:30",
    "digilockerUserDetails": {
        "digilockerId": "DL-8de97146-e7f0-5b80-a3b2-0f01nd6c14ad",
        "email": "abc@gmail.com",
        "phoneNumber": "1234567899"
    },
    "traceId": "1-65f9b08c-0f4644093941c9dd0f9fd5cc"
} `}
              </CodeBlockWithCopy>
            </>
          ),
        },
        {
          key: "2",
          label: "404",
          content: (
            <>
              <p>
               <Badge type="failure">NOT FOUND</Badge> The request id is invalid/expired.
              </p>
              <hr className="tertiary" />
              <h5>Request</h5>
              <p>
                Pass the DigiLocker request <code>id</code> as a URL parameter
              </p>
              <CodeBlockWithCopy language="json">
                {`GET /api/digilocker/:id/status `}
              </CodeBlockWithCopy>
              <hr className="tertiary" />
              <h5>Response</h5>
              <CodeBlockWithCopy language="json">
                {`{ 
    "error": { 
        "code": "request_not_found", 
        "detail": "The request id is invalid/expired.", 
        "traceId": "" 
    } 
} `}
              </CodeBlockWithCopy>
            </>
          ),
        },
         {
          key: "3",
          label: "500",
          content: (
            <>
               <p>
                <Badge type="failure">INTERNAL SERVER ERROR</Badge> Upstream service failure or Error while processing request
              </p>
              <hr className="tertiary" />
              <h5>Request</h5>
              <p>
                Pass the DigiLocker request <code>id</code> as a URL parameter
              </p>
              <CodeBlockWithCopy language="json">
                {`GET /api/digilocker/:id/status `}
              </CodeBlockWithCopy>
              <hr className="tertiary" />
              <h5>Response</h5>
              <CodeBlockWithCopy language="json">
                {`{ 
   "error": {
        "code": "internal_server_error",
        "detail": "Upstream service failure", // Or, "Error while processing request"
        "traceId": ""
    }
} `}
              </CodeBlockWithCopy>
            </>
          ),
        },
      ]}
    ></Tabs>
  </Portion>
</Row>

<hr class="primary" />

### Get list of all docs available

Call this API to get a global list of all documents that DigiLocker lets you fetch and the corresponding meta data for each document.

<Callout type="warning">
  This list can be very huge and the response can take a few minutes. It is
  recommended that you store this list on your end for usage in your
  application.{" "}
</Callout>

<br />

<Callout type="tip">
  Consider updating this list of documents only once every month or as needed,
  as it does not change very often.
</Callout>

<Row>
  <Portion desktopSpan="whole">
    <Tabs
      tabs={[
        {
          key: "1",
          label: "200",
          content: (
            <>
              <p>
                <Badge type="success">SUCCESS</Badge> Setu has processed your
                request successfully.
              </p>
              <hr className="tertiary" />
              <h5>Request</h5>
              <CodeBlockWithCopy language="json">
                {`GET /api/digilocker/documents `}
              </CodeBlockWithCopy>
              <hr className="tertiary" />
              <h5>Response</h5>
              <p>Each document in the response has the following details—</p>
              <ul>
                <li>
                  <code>availableFormats</code> is an array that specifies the
                  formats in which the document is made available through
                  DigiLocker.
                </li>
                <li>
                  <code>description</code> specifies the name of the document,
                  as given by the document issuer.
                </li>
                <li>
                  <code>docType</code> is a short code that identifies the type
                  of the document.
                </li>
                <li>
                  <code>orgId</code> is the code of the document issuer.
                </li>
                <li>
                  <code>orgName</code> is the name of the document issuer
                </li>
              </ul>
              <Callout type="tip">
                To uniquely identify a document, both <code>docType</code> and{" "}
                <code>orgId</code> are necessary. Multiple issuers, with their
                unique <code>orgId</code>, can issue documents which can be of
                the same <code>docType</code>. A quick example would be driving
                license being issued by different states—the{" "}
                <code>docType</code> is same whereas the <code>orgId</code>{" "}
                differs.
              </Callout>
              <ul>
                <li>
                  <code>parameters</code> is an array that contains key-value
                  pairs, which specifies the user-specific identifiers required
                  to fetch the document. You can use the description to aid your
                  user, to input information on your UI.
                </li>
              </ul>
              <Callout type="warning">
                A document can require more than one parameter, as specified by
                the document issuer.
              </Callout>
              <br />
              <Callout type="warning">
                <code>description</code> key-value pair in parameters array, is
                only for your information and should not to be passed as an
                identifier to fetch that document
              </Callout>
              <br />
              <CodeBlockWithCopy language="json">
                {`{ 
    "documents": [ 
        { 
            "availableFormats": [ 
                "pdf" 
            ], 
            "description": "Pension Certificate", 
            "docType": "PECER", 
            "orgId": "002317", 
            "orgName": "Accountants General, Tripura", 
            "parameters": [ 
                { 
                    "description": "Account No./PPO No.", 
                    "name": "AC_NO" 
                } 
            ] 
        }, 
        { 
            "availableFormats": [ 
                "pdf" 
            ], 
            "description": "Provident Fund Member Passbook", 
            "docType": "PRFND", 
            "orgId": "002317", 
            "orgName": "Accountants General, Tripura", 
            "parameters": [ 
                { 
                    "description": "Account No./PPO No.", 
                    "name": "AC_NO" 
                }, 
                { 
                    "description": "Name of the member", 
                    "name": "MemberName" 
                } 
            ] 
        } 
    ] 
} `}
              </CodeBlockWithCopy>
            </>
          ),
        },
        {
          key: "2",
          label: "500",
          content: (
            <>
              <p>
                <Badge type="failure">INTERNAL SERVER ERROR</Badge> Upstream service failure or Error while processing request
              </p>
              <hr className="tertiary" />
              <h5>Request</h5>
              <CodeBlockWithCopy language="json">
                {`GET /api/digilocker/documents`}
              </CodeBlockWithCopy>
              <hr className="tertiary" />
              <h5>Response</h5>
              <CodeBlockWithCopy language="json">
                {`{
    "error": {
        "code": "internal_server_error",
        "detail": "Upstream service failure", // Or, "Error while processing request"
        "traceId": ""
    }
}`}
              </CodeBlockWithCopy>
            </>
          ),
        },
      ]}
    ></Tabs>
  </Portion>
</Row>

<hr class="primary" />

### Fetch a document

Call this API to fetch document of a user from DigiLocker.

<Row>
  <Portion desktopSpan="whole">
    <Tabs
      tabs={[
        {
          key: "1",
          label: "200",
          content: (
            <>
              <p>
                <Badge type="success">SUCCESS</Badge> Setu has processed your
                request successfully and the document was fetched.
              </p>
              <hr className="tertiary" />
              <h5>Request</h5>
              <p>Provide the following details in the request—</p>
              <ul>
                <li>
                  DigiLocker request <code>id</code> as a URL parameter
                </li>
                <li>
                  Refer to the response of{" "}
                  <strong>Get list of all docs available</strong> API for
                  obtaining document specific values explained here—
                  <ul>
                    <li>
                      <code>docType</code> of the document
                    </li>
                    <li>
                      <code>orgId</code> of the document issuer
                    </li>
                    <li>
                      The <code>format</code> in which you require the document.
                      This should be one of the formats that the document is
                      actually available in.
                    </li>
                    <li>
                      User <code>consent</code> should be <code>Y</code> to
                      attempt a document fetch
                    </li>
                    <li>
                      <code>parameters</code> is an array that contains
                      key-value pairs, which specifies the identifiers required
                      to fetch the document. Refer to the sample response of{" "}
                      <strong>Get list of all docs available</strong> API for a
                      detailed explanation of <code>parameters</code> array.
                    </li>
                  </ul>
                </li>
              </ul>
              <Callout type="warning">
                <strong>
                  Note that for each parameter specified by the document issuer—
                </strong>{" "}
                <br />
                <br />
                The first element has to be the key-value pair specified by the
                document issuer, like so— <code>
                  "name": "MemberName"
                </code>. <br /> The second element should be the key-value pair
                with the actual value of the parameter specified, like so—{" "}
                <code>"value":"Ramesh"</code>.
              </Callout>
              <br />
              <CodeBlockWithCopy language="json">
                {`POST /api/digilocker/:id/document 
 
{ 
    "docType": "PRFND", 
    "orgId": "002317", 
    "format": "pdf", 
    "consent": "Y", 
    "parameters": [ { 
        "name": "AC_NO", 
        "value": "98432234234" 
    }, 
    { 
        "name": "MemberName", 
        "value": "Ramesh" 
    }] 
} `}
              </CodeBlockWithCopy>
              <hr className="tertiary" />
              <h5>Response</h5>
              <p>You will get the following details—</p>
              <ul>
                <li>
                  <p>
                    <code>fileUrl</code> to download fetched document
                  </p>
                </li>
                <li>
                  <p>
                    Validity of the <code>fileUrl</code> in{" "}
                    <code>ISO 8601 format</code> timestamp
                  </p>
                </li>
              </ul>
              <CodeBlockWithCopy language="json">
                {`{ 
    "fileUrl": "s3_url of the file to be downloaded", 
    "validUpto": "2021-09-21T09:12:12+05:30" 
} `}
              </CodeBlockWithCopy>
            </>
          ),
        },
        {
          key: "2",
          label: "400",
          content: (
            <>
              <>
                <Text size="small" weight="600">
                  Type 1
                </Text>
                <Card padding="nano" shape="rounded" marginBottom="micro">
                  <details>
                    <summary>
                     <Badge type="failure">BAD REQUEST</Badge> Your request has an
                invalid payload.
                    </summary>
                    <hr className="tertiary" />
                    <h5>Request</h5>
                     <p>
                      The key-value pair for <code>MemberName</code> and its value are
                      missing in this example JSON body.
                    </p>
                    <CodeBlockWithCopy language="json">
                      {`POST /api/digilocker/:id/document 
 
{ 
    "docType": "PRFND", 
    "orgId": "002317", 
    "format": "pdf", 
    "consent": "Y", 
    "parameters": [ { 
        "name": "AC_NO", 
        "value": "98432234234" 
    }] 
} `}
                    </CodeBlockWithCopy>
                    <hr className="tertiary" />
                    <h5>Response</h5>
                    <CodeBlockWithCopy language="json">
                      {`{ 
    "error": { 
        "code": "invalid_payload", 
        "detail": "Missing required parameter in the JSON body", 
        "traceId": "" 
    } 
}`}
                    </CodeBlockWithCopy>
                  </details>
                </Card>
              </> 
              <>
                <Text size="small" weight="600">
                  Type 2
                </Text>
                <Card padding="nano" shape="rounded" marginBottom="micro">
                  <details>
                    <summary>
                    <Badge type="failure">BAD REQUEST</Badge> User consent is not
                available
                    </summary>
                    <hr className="tertiary" />
                    <h5>Request</h5>
                    <CodeBlockWithCopy language="json">
                      {`POST /api/digilocker/:id/document 
 
{ 
    "docType": "PRFND", 
    "orgId": "002317", 
    "format": "pdf", 
    "consent": "N", 
    "parameters": [ { 
        "name": "AC_NO", 
        "value": "98432234234" 
    }, 
    { 
        "name": "MemberName", 
        "value": "Ramesh" 
    }] 
} `}
                    </CodeBlockWithCopy>
                    <hr className="tertiary" />
                    <h5>Response</h5>
                    <CodeBlockWithCopy language="json">
                      {`{ 
    "error": { 
        "code": "consent_not_given", 
        "detail": "Only accepted value for consent is Y", 
        "traceId": "" 
    } 
} `}
                    </CodeBlockWithCopy>
                  </details>
                </Card>
              </> 
              <>
                <Text size="small" weight="600">
                  Type 3
                </Text>
                <Card padding="nano" shape="rounded" marginBottom="micro">
                  <details>
                    <summary>
                      <Badge type="failure">BAD REQUEST</Badge> Aadhaar not linked to mobile number.
                    </summary>
                    <hr className="tertiary" />
                    <h5>Request</h5>
                    <p>
                      Pass the DigiLocker request <code>id</code> as a URL parameter
                    </p>
                    <CodeBlockWithCopy language="json">
                      {`POST /api/digilocker/:id/document 
{ 
    "docType": "PRFND", 
    "orgId": "002317", 
    "format": "pdf", 
    "consent": "Y", 
    "parameters": [ { 
        "name": "AC_NO", 
        "value": "98432234234" 
    }, 
    { 
        "name": "MemberName", 
        "value": "Ramesh" 
    }] 
} `}
                    </CodeBlockWithCopy>
                    <hr className="tertiary" />
                    <h5>Response</h5>
                    <CodeBlockWithCopy language="json">
                      {`{ 
    "error": { 
        "code": "aadhaar_not_linked", 
        "detail": "The user has not linked his Aadhaar card with Digilocker account.", 
        "traceId": "" 
    } 
} `}
                    </CodeBlockWithCopy>
                  </details>
                </Card>
              </> 
            </>
          ),
        },
        {
          key: "3",
          label: "401",
          content: (
            <>
              <p>
                <Badge type="failure">UNAUTHORIZED</Badge> User token has been
                revoked. Generate a fresh DigiLocker request.
              </p>
              <hr className="tertiary" />
              <h5>Request</h5>
              <CodeBlockWithCopy language="json">
                {`POST /api/digilocker/:id/document 
 
{ 
    "docType": "PRFND", 
    "orgId": "002317", 
    "format": "pdf", 
    "consent": "Y", 
    "parameters": [ { 
        "name": "AC_NO", 
        "value": "98432234234" 
    }, 
    { 
        "name": "MemberName", 
        "value": "Ramesh" 
    }] 
} `}
              </CodeBlockWithCopy>
              <hr className="tertiary" />
              <h5>Response</h5>
              <CodeBlockWithCopy language="json">
                {`{ 
    "error": { 
        "code": "token_revoked", 
        "detail": "The user has revoked the token for the given request.", 
        "traceId": "" 
    } 
} `}
              </CodeBlockWithCopy>
            </>
          ),
        },
        {
          key: "4",
          label: "404",
          content: (
            <>
              <p>
               <Badge type="failure">NOT FOUND</Badge> The request id is invalid/expired.
              </p>
              <hr className="tertiary" />
              <h5>Request</h5>
              <CodeBlockWithCopy language="json">
                {`POST /api/digilocker/:id/document 
{ 
    "docType": "PRFND", 
    "orgId": "002317", 
    "format": "pdf", 
    "consent": "Y", 
    "parameters": [ { 
        "name": "AC_NO", 
        "value": "98432234234" 
    }, 
    { 
        "name": "MemberName", 
        "value": "Ramesh" 
    }] 
} `}
              </CodeBlockWithCopy>
              <hr className="tertiary" />
              <h5>Response</h5>
              <CodeBlockWithCopy language="json">
                {`{ 
    "error": { 
        "code": "request_not_found", 
        "detail": "The request id is invalid/expired.", 
        "traceId": "" 
    } 
} `}
              </CodeBlockWithCopy>
            </>
          ),
        },
        {
          key: "5",
          label: "500",
          content: (
            <>
               <p>
                <Badge type="failure">INTERNAL SERVER ERROR</Badge> Upstream service failure or Error while processing request
              </p>
              <hr className="tertiary" />
              <h5>Request</h5>
              <CodeBlockWithCopy language="json">
                {`POST /api/digilocker/:id/document 
 
{ 
    "docType": "PRFND", 
    "orgId": "002317", 
    "format": "pdf", 
    "consent": "Y", 
    "parameters": [ { 
        "name": "AC_NO", 
        "value": "98432234234" 
    }, 
    { 
        "name": "MemberName", 
        "value": "Ramesh" 
    }] 
} `}
              </CodeBlockWithCopy>
              <hr className="tertiary" />
              <h5>Response</h5>
              <CodeBlockWithCopy language="json">
                {`{
    "error": {
        "code": "internal_server_error",
        "detail": "Upstream service failure", // Or, "Error while processing request"
        "traceId": ""
    }
}`}
              </CodeBlockWithCopy>
            </>
          ),
        },
      ]}
    ></Tabs>
  </Portion>
</Row>

<hr class="primary" />

### Fetch Aadhaar data

Call this API to fetch the Aadhaar data of a user from DigiLocker. The Aadhaar XML file is signed by DigiLocker.

<Row>
  <Portion desktopSpan="whole">
    <Tabs
      tabs={[
        {
          key: "1",
          label: "200",
          content: (
            <>
              <p>
                <Badge type="success">SUCCESS</Badge> Setu has processed your
                request successfully and Aadhaar data was fetched successfully.
              </p>
              <hr className="tertiary" />
              <h5>Request</h5>
              <p>
                Provide the DigiLocker request <code>id</code> in the request—
              </p>
              <CodeBlockWithCopy language="json">
                {`GET /api/digilocker/:id/aadhaar `}
              </CodeBlockWithCopy>
              <hr className="tertiary" />
              <h5>Response</h5>
              <p>
                You will get the Aadhaar data of the user as JSON along with the
                <code>fileUrl</code> to Aadhaar XML.
              </p>
              <Callout type="tip">
                The <code>shareCode</code> will always be empty for this API and
                is present to match the JSON response of Setu OKYC APIs.
              </Callout>
              <br />
              <CodeBlockWithCopy language="json">
                {`{
    "aadhaar": { 
        "address": { 
            "careOf": "S/O John Doe", 
            "country": "India", 
            "district": "district", 
            "house": "house address", 
            "landmark": "", 
            "locality": "locality", 
            "pin": "123456", 
            "postOffice": "", 
            "state": "state", 
            "street": "", 
            "subDistrict": "", 
            "vtc": "vtc" 
        }, 
        "dateOfBirth": "01-01-1990", 
        "email": "", 
        "gender": "M", 
        "generatedAt": "2021-10-26T17:17:36.342+05:30", 
        "maskedNumber": "xxxx-xxxx-1234", 
        "name": "Jack Doe", 
        "phone": "", 
        "photo": "", 
        "verified": { 
            "email": false, 
            "phone": false, 
            "signature": true 
        }, 
        "xml": { 
            "fileUrl": "https://s3linkgoeshere.com", 
            "shareCode": "", 
            "validUntil": "2021-10-09T06:04:16+05:30" 
        } 
    }, 
    "id": "391a45be-d08d-4dd0-b8a8-06e53392d435", 
    "status": "complete" 
} `}
              </CodeBlockWithCopy>
            </>
          ),
        },
        {
          key: "2",
          label: "400",
          content: (
            <>
               <p>
                <Badge type="failure">BAD REQUEST</Badge> Aadhaar not linked to mobile number.
              </p>
              <hr className="tertiary" />
              <h5>Request</h5>
              <p>
                Pass the DigiLocker request <code>id</code> as a URL parameter
              </p>
              <CodeBlockWithCopy language="json">
                {`GET /api/digilocker/:id/aadhaar`}
              </CodeBlockWithCopy>
              <hr className="tertiary" />
              <h5>Response</h5>
              <CodeBlockWithCopy language="json">
                {`{ 
    "error": { 
        "code": "aadhaar_not_linked", 
        "detail": "The user has not linked his Aadhaar card with Digilocker account.", 
        "traceId": "" 
    } 
} `}
              </CodeBlockWithCopy>
            </>
          ),
        },
        {
          key: "4",
          label: "401",
          content: (
            <>
             <>
                <Text size="small" weight="600">
                  Type 1
                </Text>
                <Card padding="nano" shape="rounded" marginBottom="micro">
                  <details>
                    <summary>
                     <Badge type="failure">UNAUTHORIZED</Badge> User is not authenticated to access this resource
                    </summary>
                    <hr className="tertiary" />
                    <h5>Request</h5>
                    <p>
                      Pass the DigiLocker request <code>id</code> as a URL parameter
                    </p>
                    <CodeBlockWithCopy language="json">
                     {`GET /api/digilocker/:id/aadhaar `}
                    </CodeBlockWithCopy>
                    <hr className="tertiary" />
                    <h5>Response</h5>
                    <CodeBlockWithCopy language="json">
                     {`{
    "error": {
        "code": "user_not_authenticated",
        "detail": "User is not authenticated to access this resource",
        "traceId": ""
    }
}`}
                    </CodeBlockWithCopy>
                  </details>
                </Card>
              </>
              <>
                <Text size="small" weight="600">
                  Type 2
                </Text>
                <Card padding="nano" shape="rounded" marginBottom="micro">
                  <details>
                    <summary>
                    <Badge type="failure">UNAUTHORIZED</Badge> User token has been
                revoked
                    </summary>
                    <hr className="tertiary" />
                    <h5>Request</h5>
                    <p>
                      Provide the DigiLocker request <code>id</code> in the request—
                    </p>
                    <CodeBlockWithCopy language="json">
                     {`GET /api/digilocker/:id/aadhaar `}
                    </CodeBlockWithCopy>
                    <hr className="tertiary" />
                    <h5>Response</h5>
                    <CodeBlockWithCopy language="json">
                     {`{ 
    "error": { 
        "code": "token_revoked", 
        "detail": "The user has revoked the token for the given request.", 
        "traceId": "" 
    } 
} `}
                    </CodeBlockWithCopy>
                  </details>
                </Card>
              </> 
            </>
          ),
        },
        {
          key: "5",
          label: "404",
          content: (
            <>
               <p>
                <Badge type="failure">NOT FOUND</Badge> The request id is invalid/expired.
              </p>
              <hr className="tertiary" />
              <h5>Request</h5>
              <p>
                Pass the DigiLocker request <code>id</code> as a URL parameter
              </p>
              <CodeBlockWithCopy language="json">
                {`GET /api/digilocker/:id/aadhaar`}
              </CodeBlockWithCopy>
              <hr className="tertiary" />
              <h5>Response</h5>
              <CodeBlockWithCopy language="json">
                {`{ 
    "error": { 
        "code": "request_not_found", 
        "detail": "The request id is invalid/expired.", 
        "traceId": "" 
    } 
} `}
              </CodeBlockWithCopy>
            </>
          ),
        },
        {
          key: "6",
          label: "500",
          content: (
            <>
             <>
                <Text size="small" weight="600">
                  Type 1
                </Text>
                <Card padding="nano" shape="rounded" marginBottom="micro">
                  <details>
                    <summary>
                     <Badge type="failure">INTERNAL SERVER ERROR</Badge> Failed to get user's Aadhaar XML.
                    </summary>
                    <hr className="tertiary" />
                    <h5>Request</h5>
                    <p>
                       Provide the DigiLocker request <code>id</code> in the request—
                    </p>
                    <CodeBlockWithCopy language="json">
                     {`GET /api/digilocker/:id/aadhaar `}
                    </CodeBlockWithCopy>
                    <hr className="tertiary" />
                    <h5>Response</h5>
                    <CodeBlockWithCopy language="json">
                   {`{ 
    "error": { 
        "code": "get_xml_failed", 
        "detail": "Failed to get user's Aadhaar XML.", 
        "traceId": "" 
    } 
} `}
                    </CodeBlockWithCopy>
                  </details>
                </Card>
              </>
             <>
                <Text size="small" weight="600">
                  Type 2
                </Text>
                <Card padding="nano" shape="rounded" marginBottom="micro">
                  <details>
                    <summary>
                      <Badge type="failure">INTERNAL SERVER ERROR</Badge> Upstream service failure or Error while processing request
                    </summary>
                    <hr className="tertiary" />
                    <h5>Request</h5>
                    <p>
                      Provide the DigiLocker request <code>id</code> in the request—
                    </p>
                    <CodeBlockWithCopy language="json">
                     {`GET /api/digilocker/:id/aadhaar `}
                    </CodeBlockWithCopy>
                    <hr className="tertiary" />
                    <h5>Response</h5>
                    <CodeBlockWithCopy language="json">
                  {`{ 
    "error": { 
        "code": "internal_server_error",
        "detail": "Upstream service failure", // Or, "Error while processing request"
        "traceId": ""
    } 
} `}
                    </CodeBlockWithCopy>
                  </details>
                </Card>
              </>
            </>
          ),
        },
      ]}
    ></Tabs>
  </Portion>
</Row>

<hr class="primary" />

### Revoke DigiLocker request

Call this API to revoke a DigiLocker request. The request id can no longer be used to interact with user’s DigiLocker.

<Row>
  <Portion desktopSpan="whole">
    <Tabs
      tabs={[
        {
          key: "1",
          label: "200",
          content: (
            <>
              <p>
                <Badge type="success">SUCCESS</Badge> Setu has processed your
                request successfully.
              </p>
              <hr className="tertiary" />
              <h5>Request</h5>
              <p>
                Provide the DigiLocker request <code>id</code> in the request—
              </p>
              <CodeBlockWithCopy language="json">
                {`GET /api/digilocker/:id/revoke `}
              </CodeBlockWithCopy>
              <hr className="tertiary" />
              <h5>Response</h5>
              <CodeBlockWithCopy language="json">
                {`{ 
    "success": true 
} `}
              </CodeBlockWithCopy>
            </>
          ),
        },
          {
          key: "2",
          label: "401",
          content: (
            <>
             <p>
                <Badge type="failure">UNAUTHORIZED</Badge> User is not authenticated to access this resource
              </p>
              <hr className="tertiary" />
              <h5>Request</h5>
              <p>
                Provide the DigiLocker request <code>id</code> in the request—
              </p>
              <CodeBlockWithCopy language="json">
                {`GET /api/digilocker/:id/revoke `}
              </CodeBlockWithCopy>
              <hr className="tertiary" />
              <h5>Response</h5>
               <CodeBlockWithCopy language="json">
                {`{
    "error": {
        "code": "user_not_authenticated",
        "detail": "User is not authenticated to access this resource",
        "traceId": ""
    }
}`}
              </CodeBlockWithCopy>
            </>
          ),
        },
        {
          key: "3",
          label: "404",
          content: (
            <>
             <p>
               <Badge type="failure">NOT FOUND</Badge> The request id is invalid/expired.
              </p>
              <hr className="tertiary" />
              <h5>Request</h5>
              <p>
                Provide the DigiLocker request <code>id</code> in the request—
              </p>
              <CodeBlockWithCopy language="json">
                {`GET /api/digilocker/:id/revoke `}
              </CodeBlockWithCopy>
              <hr className="tertiary" />
              <h5>Response</h5>
              <CodeBlockWithCopy language="json">
                {`{ 
    "error": { 
        "code": "request_not_found", 
        "detail": "The request id is invalid/expired.", 
        "traceId": "" 
    } 
} `}
              </CodeBlockWithCopy>
            </>
          ),
        },
      
        {
          key: "4",
          label: "500",
          content: (
            <>
              <p>
                <Badge type="failure">INTERNAL SERVER ERROR</Badge> Upstream service failure or Error while processing request
              </p>
              <hr className="tertiary" />
              <h5>Request</h5>
              <p>
                Provide the DigiLocker request <code>id</code> in the request—
              </p>
              <CodeBlockWithCopy language="json">
                {`GET /api/digilocker/:id/revoke `}
              </CodeBlockWithCopy>
              <hr className="tertiary" />
              <h5>Response</h5>
              <CodeBlockWithCopy language="json">
                {`{
    "error": {
        "code": "internal_server_error",
        "detail": "Upstream service failure", // Or, "Error while processing request"
        "traceId": ""
    }
}`}
              </CodeBlockWithCopy>
            </>
          ),
        },
      ]}
    ></Tabs>
  </Portion>
</Row>

<WasPageHelpful />
