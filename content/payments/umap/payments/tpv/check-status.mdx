---
sidebar_title: Check status
page_title: UPI Setu - Payments - TPV - Check payment status
order: 2
visible_in_sidebar: true
---

## Check payment status

This is a generic payment status api, that accepts the id of the payment-link to show the status of the last payment done on the payment-link.

<table>
  <tbody>
    <tr>
      <th>Staging host</th>
      <td>
        <code>https://umap.setu.co/api</code>
      </td>
    </tr>
    <tr>
      <th>Method</th>
      <td>
        <code>GET</code>
      </td>
    </tr>
    <tr>
      <th>Path</th>
      <td>
        <code>
          /v1/merchants/payments/product-instances/&#123;paymentLinkId&#125;/last
        </code>
      </td>
    </tr>
    <tr>
      <th>Header</th>
      <td>
        <code>merchantId</code>
        <br />
        <code>Authorization</code>: Bearer &lt;<b>insert_token_here</b>&gt;.
        Generate this token using{" "}
        <a href="/payments/upi-deeplinks/resources/oauth" target="_blank">
          OAuth
        </a>{" "}
        or{" "}
        <a href="/payments/upi-deeplinks/resources/jwt" target="_blank">
          JWT
        </a>
        .<br />
        <br />
        <code>Content-Type</code>—will be <code>application/json</code>
      </td>
    </tr>
    <tr>
      <th>API reference</th>
      <td>
        <a
          href="/payments/umap/api-reference#/category~payments/operation~payments#fetchLastByProductInstanceId"
          target="_blank"
        >
          Check payment status ↗
        </a>
      </td>
    </tr>
  </tbody>
</table>

###### Sample response

<CodeBlockWithCopy language="json">
  {`{
  "amount": 10000,
  "createdAt": "2023-09-04T12:08:20+0530",
  "currency": "INR",
  "customerAccountType": "savings",
  "customerVpa": "test-auto-tyvmm59i9b@pineaxis",
  "id": "01ARZ3NDEKTSV4RRFFQ69G5FAV",
  "merchantId": "01ARZ3NDEKTSV4RRFFQ69G5FAV",
  "merchantReferenceId": "01ARZ3NDEKTSV4RRFFQ69G5FAV",
  "merchantVpa": "test-auto-beibfev2oq@pineaxis",
  "productInstanceId": "01ARZ3NDEKTSV4RRFFQ69G5FAV",
  "reason": {
    "code": "unable-to-fulfill-request",
    "desc": "unable-to-fulfill-request",
    "npciErrCode": "YG",
    "npciErrDesc": "MERCHANT ERROR (PAYEE PSP)",
    "npciRespCode": "YG",
    "npciRespDesc": "MERCHANT ERROR (PAYEE PSP)"
  },
  "refId": "1240689979139556558",
  "rrn": "124068997913",
  "status": "initiated",
  "txnId": "SETmBZkQOV0M7wyyP1V4PIFhRSzW5eSjmYI",
  "txnNote": "testpay"
}`}
</CodeBlockWithCopy>

**In the above response:**

- `id` is a unique ID that is associated with this payment and can be used to track it later.
- `reason` object is only populated when there are errors from the NPCI.

<hr class="primary" />

## Check payment history

This is a generic payment status api, that accepts the id of the payment-link and returns 5 latest payments done on the payment-link.

<Callout type="tip">
  This API can be useful to check the payments done on the payment-link that
  accept <strong>multiple payments</strong>.{" "}
</Callout>

<hr class="primary" />

<table>
  <tbody>
    <tr>
      <th>Staging host</th>
      <td>
        <code>https://umap.setu.co/api</code>
      </td>
    </tr>
    <tr>
      <th>Method</th>
      <td>
        <code>GET</code>
      </td>
    </tr>
    <tr>
      <th>Path</th>
      <td>
        <code>
          /v1/merchants/payments/product-instances/&#123;paymentLinkId&#125;/history
        </code>
      </td>
    </tr>
    <tr>
      <th>Header</th>
      <td>
        <code>merchantId</code>
        <br />
        <code>Authorization</code>: Bearer &lt;<b>insert_token_here</b>&gt;.
        Generate this token using{" "}
        <a href="/payments/upi-deeplinks/resources/oauth" target="_blank">
          OAuth
        </a>{" "}
        or{" "}
        <a href="/payments/upi-deeplinks/resources/jwt" target="_blank">
          JWT
        </a>
        .<br />
        <br />
        <code>Content-Type</code>—will be <code>application/json</code>
      </td>
    </tr>
    <tr>
      <th>API reference</th>
      <td>
        <a
          href="/payments/umap/api-reference#/category~payments/operation~payments#fetchHistoryByProductInstanceId"
          target="_blank"
        >
          Check Payment History ↗
        </a>
      </td>
    </tr>
  </tbody>
</table>

###### Sample response

<CodeBlockWithCopy language="json">
  {`{
  "payments": [
    {
      "amount": 10000,
      "createdAt": "2023-09-04T12:08:20+0530",
      "currency": "INR",
      "customerAccountType": "savings",
      "customerVpa": "test-auto-tyvmm59i9b@pineaxis",
      "id": "01ARZ3NDEKTSV4RRFFQ69G5FAV",
      "merchantId": "01ARZ3NDEKTSV4RRFFQ69G5FAV",
      "merchantReferenceId": "01ARZ3NDEKTSV4RRFFQ69G5FAV",
      "merchantVpa": "test-auto-beibfev2oq@pineaxis",
      "productInstanceId": "01ARZ3NDEKTSV4RRFFQ69G5FAV",
      "reason": {
        "code": "unable-to-fulfill-request",
        "desc": "unable-to-fulfill-request",
        "npciErrCode": "YG",
        "npciErrDesc": "MERCHANT ERROR (PAYEE PSP)",
        "npciRespCode": "YG",
        "npciRespDesc": "MERCHANT ERROR (PAYEE PSP)"
      },
      "refId": "1240689979139556558",
      "requestId": "cjqml1f2e5ocq2mesej0",
      "rrn": "124068997913",
      "status": "initiated",
      "txnId": "SETmBZkQOV0M7wyyP1V4PIFhRSzW5eSjmYI",
      "txnNote": "testpay"
    },
    {
      "amount": 10000,
      "createdAt": "2023-09-04T12:08:20+0530",
      "currency": "INR",
      "customerAccountType": "savings",
      "customerVpa": "test-auto-tyvmm59i9b@pineaxis",
      "id": "01ARZ3NDEKTSV4RRFFQ69G5FAV",
      "merchantId": "01ARZ3NDEKTSV4RRFFQ69G5FAV",
      "merchantReferenceId": "01ARZ3NDEKTSV4RRFFQ69G5FAV",
      "merchantVpa": "test-auto-beibfev2oq@pineaxis",
      "productInstanceId": "01ARZ3NDEKTSV4RRFFQ69G5FAV",
      "reason": {
        "code": "unable-to-fulfill-request",
        "desc": "unable-to-fulfill-request",
        "npciErrCode": "YG",
        "npciErrDesc": "MERCHANT ERROR (PAYEE PSP)",
        "npciRespCode": "YG",
        "npciRespDesc": "MERCHANT ERROR (PAYEE PSP)"
      },
      "refId": "1240689979139556558",
      "requestId": "cjqml1f2e5ocq2mesej0",
      "rrn": "124068997913",
      "status": "initiated",
      "txnId": "SETmBZkQOV0M7wyyP1V4PIFhRSzW5eSjmYI",
      "txnNote": "testpay"
    }
  ]
}`}
</CodeBlockWithCopy>

<WasPageHelpful />
