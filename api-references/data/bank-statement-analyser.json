{
    "openapi": "3.0.2",
    "info": {
        "title": "Bank Statement Analyser",
        "version": "0.1.0",
        "description": "Setuâ€™s bank statement analyser gives you actionable insights from a customer's bank statement about their income, expenditure and financial history."
    },
    "paths": {
        "/v1/fi_data": {
            "get": {
                "tags": ["AA Gateway"],
                "summary": "Get FIData blocks",
                "description": "Get a list of available FI Data blocks for the FIU",
                "operationId": "get_fi_data_v1_fi_data_get",
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "title": "Response Get Fi Data V1 Fi Data Get",
                                    "anyOf": [
                                        {
                                            "$ref": "#/components/schemas/FIDataBlockGetResponse"
                                        },
                                        {
                                            "$ref": "#/components/schemas/GenericResponse"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": ["AA Gateway"],
                "summary": "Create FIData block (FIU Webhook)",
                "description": "Post FI DataFetch notification from AA Gateway to be processed for insights later",
                "operationId": "create_fi_data_v1_fi_data_post",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "title": "FI Data as defined by ReBIT schema",
                                "allOf": [
                                    { "$ref": "#/components/schemas/FIData" }
                                ]
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "title": "Response Create Fi Data V1 Fi Data Post",
                                    "anyOf": [
                                        {
                                            "$ref": "#/components/schemas/FIDataBlockCreateResponse"
                                        },
                                        {
                                            "$ref": "#/components/schemas/GenericResponse"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/v1/insight/master": {
            "get": {
                "tags": ["Reports"],
                "summary": "Get Insight Masters",
                "description": "Get all available Insights that can be included in a report",
                "operationId": "get_insight_masters_v1_insight_master_get",
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "title": "Response Get Insight Masters V1 Insight Master Get",
                                    "anyOf": [
                                        {
                                            "$ref": "#/components/schemas/InsightMasterGetResponse"
                                        },
                                        {
                                            "$ref": "#/components/schemas/GenericResponse"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/v1/report": {
            "get": {
                "tags": ["Reports"],
                "summary": "Get Reports",
                "description": "Get a list of pre-existing reports for the FIU",
                "operationId": "get_reports_v1_report_get",
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "title": "Response Get Reports V1 Report Get",
                                    "anyOf": [
                                        {
                                            "$ref": "#/components/schemas/ReportGetResponse"
                                        },
                                        {
                                            "$ref": "#/components/schemas/GenericResponse"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": ["Reports"],
                "summary": "Create Report",
                "description": "Create a report with a list Insights",
                "operationId": "create_report_v1_report_post",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Body_create_report_v1_report_post"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "title": "Response Create Report V1 Report Post",
                                    "anyOf": [
                                        {
                                            "$ref": "#/components/schemas/ReportCreateResponse"
                                        },
                                        {
                                            "$ref": "#/components/schemas/GenericResponse"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/v1/insight": {
            "get": {
                "tags": ["Insights"],
                "summary": "Get Insights",
                "description": "Get Insights for a report",
                "operationId": "get_insights_v1_insight_get",
                "parameters": [
                    {
                        "required": true,
                        "schema": {
                            "title": "Job ID for which insights are needed",
                            "type": "string"
                        },
                        "name": "job_id",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "title": "Response Get Insights V1 Insight Get",
                                    "anyOf": [
                                        {
                                            "$ref": "#/components/schemas/InsightGetResponse"
                                        },
                                        {
                                            "$ref": "#/components/schemas/GenericResponse"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": ["Insights"],
                "summary": "Post Insights generation job",
                "description": "Process FI data for insights",
                "operationId": "process_insights_v1_insight_post",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Body_process_insights_v1_insight_post"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Successful Response",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "title": "Response Process Insights V1 Insight Post",
                                    "anyOf": [
                                        {
                                            "$ref": "#/components/schemas/InsightJobCreateResponse"
                                        },
                                        {
                                            "$ref": "#/components/schemas/GenericResponse"
                                        }
                                    ]
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/HTTPValidationError"
                                }
                            }
                        }
                    }
                }
            }
        }
    },
    "components": {
        "schemas": {
            "Account": {
                "title": "Account",
                "type": "object",
                "properties": {
                    "profile": { "$ref": "#/components/schemas/Profile" },
                    "summary": { "$ref": "#/components/schemas/Summary" },
                    "transactions": {
                        "$ref": "#/components/schemas/Transactions"
                    },
                    "type": {
                        "title": "Type",
                        "type": "string",
                        "default": "deposit"
                    },
                    "maskedAccNumber": {
                        "title": "Maskedaccnumber",
                        "type": "string"
                    },
                    "version": { "title": "Version", "type": "number" },
                    "linkedAccRef": {
                        "title": "Linkedaccref",
                        "type": "string"
                    }
                }
            },
            "AccountType": {
                "title": "AccountType",
                "enum": ["SAVINGS", "CURRENT"],
                "type": "string",
                "description": "An enumeration."
            },
            "Body_create_report_v1_report_post": {
                "title": "Body_create_report_v1_report_post",
                "required": ["name", "insights"],
                "type": "object",
                "properties": {
                    "name": { "title": "Name", "type": "string" },
                    "insights": {
                        "title": "List of Insight masters to be included in the report",
                        "type": "array",
                        "items": { "type": "string" }
                    }
                }
            },
            "Body_process_insights_v1_insight_post": {
                "title": "Body_process_insights_v1_insight_post",
                "required": ["report_id", "data_ids"],
                "type": "object",
                "properties": {
                    "report_id": {
                        "title": "Report ID for which insights are needed",
                        "type": "string"
                    },
                    "data_ids": {
                        "title": "List of data blocks to process",
                        "type": "array",
                        "items": { "type": "string" },
                        "description": "Currently supports only one ID"
                    }
                }
            },
            "DepositData": {
                "title": "DepositData",
                "required": ["account"],
                "type": "object",
                "properties": {
                    "account": { "$ref": "#/components/schemas/Account" }
                }
            },
            "FIData": {
                "$ref": "#/components/schemas/DepositData",
                "title": "FIData"
            },
            "FIDataBlockCreateResponse": {
                "title": "FIDataBlockCreateResponse",
                "required": ["body"],
                "type": "object",
                "properties": {
                    "status": {
                        "title": "Status",
                        "type": "string",
                        "default": "Success"
                    },
                    "status_description": {
                        "title": "Status Description",
                        "type": "string"
                    },
                    "body": {
                        "$ref": "#/components/schemas/FIDataBlockResponse"
                    }
                }
            },
            "FIDataBlockGetResponse": {
                "title": "FIDataBlockGetResponse",
                "required": ["body"],
                "type": "object",
                "properties": {
                    "status": {
                        "title": "Status",
                        "type": "string",
                        "default": "Success"
                    },
                    "status_description": {
                        "title": "Status Description",
                        "type": "string"
                    },
                    "body": {
                        "title": "Body",
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/FIDataBlockResponse"
                        }
                    }
                }
            },
            "FIDataBlockResponse": {
                "title": "FIDataBlockResponse",
                "required": ["data_id", "fi_schema", "expiry_date"],
                "type": "object",
                "properties": {
                    "data_id": {
                        "title": "Data Id",
                        "type": "string",
                        "format": "uuid"
                    },
                    "fi_schema": { "title": "Fi Schema", "type": "string" },
                    "expiry_date": {
                        "title": "Expiry Date",
                        "type": "string",
                        "format": "date-time"
                    }
                }
            },
            "GenericResponse": {
                "title": "GenericResponse",
                "type": "object",
                "properties": {
                    "status": {
                        "title": "Status",
                        "type": "string",
                        "default": "Success"
                    },
                    "status_description": {
                        "title": "Status Description",
                        "type": "string"
                    }
                }
            },
            "HTTPValidationError": {
                "title": "HTTPValidationError",
                "type": "object",
                "properties": {
                    "detail": {
                        "title": "Detail",
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/ValidationError"
                        }
                    }
                }
            },
            "Holder": {
                "title": "Holder",
                "required": ["nominee", "ckycCompliance"],
                "type": "object",
                "properties": {
                    "name": { "title": "Name", "type": "string" },
                    "dob": {
                        "title": "Dob",
                        "type": "string",
                        "format": "date"
                    },
                    "mobile": { "title": "Mobile", "type": "integer" },
                    "nominee": {
                        "$ref": "#/components/schemas/HoldingNominee"
                    },
                    "landline": { "title": "Landline", "type": "string" },
                    "address": { "title": "Address", "type": "string" },
                    "email": { "title": "Email", "type": "string" },
                    "pan": { "title": "Pan", "type": "string" },
                    "ckycCompliance": {
                        "title": "Ckyccompliance",
                        "type": "boolean"
                    }
                }
            },
            "Holders": {
                "title": "Holders",
                "required": ["holder", "type"],
                "type": "object",
                "properties": {
                    "holder": {
                        "title": "Holder",
                        "type": "array",
                        "items": { "$ref": "#/components/schemas/Holder" }
                    },
                    "type": { "$ref": "#/components/schemas/HoldersType" }
                }
            },
            "HoldersType": {
                "title": "HoldersType",
                "enum": ["SINGLE", "JOINT"],
                "type": "string",
                "description": "An enumeration."
            },
            "HoldingNominee": {
                "title": "HoldingNominee",
                "enum": ["REGISTERED", "NOT-REGISTERED"],
                "type": "string",
                "description": "An enumeration."
            },
            "InsightGetResponse": {
                "title": "InsightGetResponse",
                "required": ["body"],
                "type": "object",
                "properties": {
                    "status": {
                        "title": "Status",
                        "type": "string",
                        "default": "Success"
                    },
                    "status_description": {
                        "title": "Status Description",
                        "type": "string"
                    },
                    "body": { "title": "Body", "type": "object" }
                }
            },
            "InsightJob": {
                "title": "InsightJob",
                "required": ["job_id"],
                "type": "object",
                "properties": {
                    "job_id": {
                        "title": "Job Id",
                        "type": "string",
                        "format": "uuid"
                    }
                }
            },
            "InsightJobCreateResponse": {
                "title": "InsightJobCreateResponse",
                "required": ["body"],
                "type": "object",
                "properties": {
                    "status": {
                        "title": "Status",
                        "type": "string",
                        "default": "Success"
                    },
                    "status_description": {
                        "title": "Status Description",
                        "type": "string"
                    },
                    "body": { "$ref": "#/components/schemas/InsightJob" }
                }
            },
            "InsightMaster": {
                "title": "InsightMaster",
                "required": ["name", "title"],
                "type": "object",
                "properties": {
                    "insight_id": {
                        "title": "Insight Id",
                        "type": "string",
                        "format": "uuid"
                    },
                    "name": { "title": "Name", "type": "string" },
                    "title": { "title": "Title", "type": "string" },
                    "description": { "title": "Description", "type": "string" }
                }
            },
            "InsightMasterGetResponse": {
                "title": "InsightMasterGetResponse",
                "required": ["body"],
                "type": "object",
                "properties": {
                    "status": {
                        "title": "Status",
                        "type": "string",
                        "default": "Success"
                    },
                    "status_description": {
                        "title": "Status Description",
                        "type": "string"
                    },
                    "body": {
                        "title": "Body",
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/InsightMaster"
                        }
                    }
                }
            },
            "Pending": {
                "title": "Pending",
                "required": ["amount"],
                "type": "object",
                "properties": {
                    "transactionType": {
                        "$ref": "#/components/schemas/TransactionType"
                    },
                    "amount": { "title": "Amount", "type": "number" }
                }
            },
            "Profile": {
                "title": "Profile",
                "type": "object",
                "properties": {
                    "holders": { "$ref": "#/components/schemas/Holders" }
                }
            },
            "ReportCreateResponse": {
                "title": "ReportCreateResponse",
                "required": ["body"],
                "type": "object",
                "properties": {
                    "status": {
                        "title": "Status",
                        "type": "string",
                        "default": "Success"
                    },
                    "status_description": {
                        "title": "Status Description",
                        "type": "string"
                    },
                    "body": { "$ref": "#/components/schemas/ReportResponse" }
                }
            },
            "ReportGetResponse": {
                "title": "ReportGetResponse",
                "required": ["body"],
                "type": "object",
                "properties": {
                    "status": {
                        "title": "Status",
                        "type": "string",
                        "default": "Success"
                    },
                    "status_description": {
                        "title": "Status Description",
                        "type": "string"
                    },
                    "body": {
                        "title": "Body",
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/ReportResponse"
                        }
                    }
                }
            },
            "ReportResponse": {
                "title": "ReportResponse",
                "required": ["report_id", "name", "insight_masters"],
                "type": "object",
                "properties": {
                    "report_id": {
                        "title": "Report Id",
                        "type": "string",
                        "format": "uuid"
                    },
                    "name": { "title": "Name", "type": "string" },
                    "insight_masters": {
                        "title": "Insight Masters",
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/InsightMaster"
                        }
                    }
                }
            },
            "StatusTypes": {
                "title": "StatusTypes",
                "enum": ["ACTIVE", "INACTIVE"],
                "type": "string",
                "description": "An enumeration."
            },
            "Summary": {
                "title": "Summary",
                "type": "object",
                "properties": {
                    "pending": { "$ref": "#/components/schemas/Pending" },
                    "currentBalance": {
                        "title": "Currentbalance",
                        "type": "string"
                    },
                    "currency": { "title": "Currency", "type": "string" },
                    "exchgeRate": { "title": "Exchgerate", "type": "string" },
                    "balanceDateTime": {
                        "title": "Balancedatetime",
                        "type": "string",
                        "format": "date-time"
                    },
                    "type": { "$ref": "#/components/schemas/AccountType" },
                    "branch": { "title": "Branch", "type": "string" },
                    "facility": {
                        "$ref": "#/components/schemas/SummaryFacility"
                    },
                    "ifscCode": { "title": "Ifsccode", "type": "string" },
                    "micrCode": { "title": "Micrcode", "type": "string" },
                    "openingDate": {
                        "title": "Openingdate",
                        "type": "string",
                        "format": "date"
                    },
                    "currentODLimit": {
                        "title": "Currentodlimit",
                        "type": "string"
                    },
                    "drawingLimit": {
                        "title": "Drawinglimit",
                        "type": "string"
                    },
                    "status": { "$ref": "#/components/schemas/StatusTypes" }
                }
            },
            "SummaryFacility": {
                "title": "SummaryFacility",
                "enum": ["OD", "CC"],
                "type": "string",
                "description": "An enumeration."
            },
            "Transaction": {
                "title": "Transaction",
                "required": [
                    "type",
                    "mode",
                    "amount",
                    "currentBalance",
                    "transactionTimestamp",
                    "valueDate",
                    "txnId",
                    "narration"
                ],
                "type": "object",
                "properties": {
                    "type": { "$ref": "#/components/schemas/TransactionType" },
                    "mode": { "$ref": "#/components/schemas/TransactionMode" },
                    "amount": { "title": "Amount", "type": "number" },
                    "currentBalance": {
                        "title": "Currentbalance",
                        "type": "string"
                    },
                    "transactionTimestamp": {
                        "title": "Transactiontimestamp",
                        "type": "string",
                        "format": "date-time"
                    },
                    "valueDate": {
                        "title": "Valuedate",
                        "type": "string",
                        "format": "date"
                    },
                    "txnId": { "title": "Txnid", "type": "string" },
                    "narration": { "title": "Narration", "type": "string" },
                    "reference": { "title": "Reference", "type": "string" }
                }
            },
            "TransactionMode": {
                "title": "TransactionMode",
                "enum": ["CASH", "ATM", "CARD", "UPI", "FT", "OTHERS"],
                "type": "string",
                "description": "An enumeration."
            },
            "TransactionType": {
                "title": "TransactionType",
                "enum": ["CREDIT", "DEBIT"],
                "type": "string",
                "description": "An enumeration."
            },
            "Transactions": {
                "title": "Transactions",
                "type": "object",
                "properties": {
                    "transaction": {
                        "title": "Transaction",
                        "type": "array",
                        "items": { "$ref": "#/components/schemas/Transaction" }
                    },
                    "startDate": {
                        "title": "Startdate",
                        "type": "string",
                        "format": "date"
                    },
                    "endDate": {
                        "title": "Enddate",
                        "type": "string",
                        "format": "date"
                    }
                }
            },
            "ValidationError": {
                "title": "ValidationError",
                "required": ["loc", "msg", "type"],
                "type": "object",
                "properties": {
                    "loc": {
                        "title": "Location",
                        "type": "array",
                        "items": {
                            "anyOf": [
                                { "type": "string" },
                                { "type": "integer" }
                            ]
                        }
                    },
                    "msg": { "title": "Message", "type": "string" },
                    "type": { "title": "Error Type", "type": "string" }
                }
            }
        }
    }
}
